# 数据库瓶颈
- IO瓶颈
  - 磁盘读IO瓶颈，热点数据太多，数据库缓存放不下，每次查询时会产生大量的IO，降低查询速度->分库和垂直分表
  - 网络IO瓶颈，请求的数据太多，网络带宽不够->分库
- CPU瓶颈
  - SQL问题，如SQL中包含join，groupby，orderby，非索引字段条件查询等，增加CPU运算的操作->SQL优化，建立合适的索引，在业务Service层进行业务计算
  - 单表数据量太大，查询时扫描的行太多，SQL效率低，CPU率先出现瓶颈->水平分表

# Table division
## 垂直切分
- 字段切分
  - 把业务切割得足够独立，那把不同业务的数据放到不同的数据库服务器上

## 水平切分
- 查询切分
- 原理
  - 系统绝对并发量并没有上来，只是单表的数据量太多，影响了SQL效率，加重了CPU负担，以至于成为瓶颈

## 要考虑的问题
- 当分表后，主键失效

## 操作
- 设计分表的访问算法
- 分布式全局唯一ID

# Res division
- 分担数据库访问压力
  - 网络IO瓶颈，请求的数据太多，网络带宽不够